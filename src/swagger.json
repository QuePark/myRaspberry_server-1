{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0.0",
    "title": "MY RASPBERRY",
    "description": "MY RASPBERRY API DOCS"
  },
  "tags": [
    {
      "name": "Auth",
      "description": "Sign, 인증과 관련된 정보를 담고 있는 라우트입니다."
    },
    {
      "name": "Mypage",
      "description": "개인 정보 수정과 관련된 정보를 담고 있는 라우트입니다."
    },
    {
      "name": "Movie",
      "description": "영화 추천과 관련된 정보를 담고 있는 라우트입니다."
    },
    {
      "name": "SEARCH",
      "description": "영화 검색과 관련된 정보를 담고 있는 라우트입니다."
    }
  ],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "paths": {
    "/auth/signup": {
      "post": {
        "tags": ["Auth"],
        "summary": "회원 가입을 진행합니다",
        "requestBody": {
          "description": "Sign Object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/sign"
              }
            }
          }
        },
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "회원가입에 성공했습니다."
          },
          "400": {
            "description": "{message: 실패 사유를 전달합니다.}"
          }
        }
      }
    },
    "/auth/signin": {
      "post": {
        "tags": ["Auth"],
        "summary": "로그인을 진행합니다.",
        "requestBody": {
          "description": "Sign Object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/sign"
              }
            }
          }
        },
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "로그인 성공시 다음 유저 정보와 함께 유저 확인용 jwt를 쿠키로 전송합니다.",
            "schema": {
              "$ref": "#/definitions/userinfo"
            }
          },
          "400": {
            "description": "{message: 실패 사유를 전달합니다.}"
          }
        }
      }
    },
    "/auth/signout": {
      "get": {
        "tags": ["Auth"],
        "summary": "로그아웃을 진행합니다.",
        "responses": {
          "302": {
            "description": "로그아웃 성공시 쿠키로 발급된 토큰을 삭제하고 메인 페이지로 리다이렉트합니다."
          },
          "401": {
            "description": "{message: '토큰이 만료되었습니다. 다시 로그인을 진행해주세요.'}"
          },
          "403": {
            "description": "{message: '먼저 로그인을 진행해주세요'.}"
          }
        }
      }
    },
    "/auth/kakao": {
      "get": {
        "tags": ["Auth"],
        "summary": "카카오 소셜 로그인을 진행합니다.",
        "responses": {
          "200": {
            "description": "로그인 성공시 다음 유저 정보와 함께 유저 확인용 jwt를 쿠키로 전송합니다.",
            "schema": {
              "$ref": "#/definitions/userinfo"
            }
          },
          "400": {
            "description": "{message: 실패 사유를 전달합니다.}"
          }
        }
      }
    },
    "/auth/google": {
      "get": {
        "tags": ["Auth"],
        "summary": "구글 소셜 로그인을 진행합니다.",
        "responses": {
          "200": {
            "description": "로그인 성공시 다음 유저 정보와 함께 유저 확인용 jwt를 쿠키로 전송합니다.",
            "schema": {
              "$ref": "#/definitions/userinfo"
            }
          },
          "400": {
            "description": "{message: 실패 사유를 전달합니다.}"
          }
        }
      }
    },
    "/mypage/changeinfo": {
      "patch": {
        "tags": ["Mypage"],
        "summary": "유저 정보를 변경합니다.",
        "requestBody": {
          "description": "changeInfo object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/changeinfo"
              }
            }
          }
        },
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "회원정보 변경에 성공했습니다."
          },
          "400": {
            "description": "{message: 실패 사유를 전달합니다.}"
          }
        }
      }
    },
    "/mypage/changeimage": {
      "patch": {
        "tags": ["Mypage"],
        "summary": "유저 이미지를 변경합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "img": {
                    "type": "string",
                    "default": "sending image File"
                  }
                }
              }
            }
          }
        },
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "사진 변경에 성공했습니다."
          },
          "400": {
            "description": "{message: '사진 변경에 실패했습니다.'}"
          }
        }
      }
    },
    "/search/:method/": {
      "get": {
        "tags": ["SEARCH"],
        "summary": "서치 디폴트 요청입니다.",
        "requestBody": {
          "description": "Cat Object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/userinfo"
              }
            }
          }
        },
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/userinfo"
            }
          },
          "400": {
            "description": "Failed. Bad post data."
          }
        }
      }
    }
  },

  "definitions": {
    "userinfo": {
      "type": "object",
      "properties": {
        "username": {
          "type": "string"
        },
        "profileImg": {
          "type": "string"
        },
        "tag": {
          "type": "string"
        }
      }
    },
    "changeinfo": {
      "type": "object",
      "properties": {
        "password": {
          "type": "string"
        },
        "newPass": {
          "type": "string",
          "nullable": true
        },
        "newUsername": {
          "type": "string",
          "nullable": true
        }
      }
    },

    "sign": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    }
  }
}
